{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Saralin\\\\IdeaProjects\\\\fullstack-typescript-mern-todo\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Saralin\\\\IdeaProjects\\\\fullstack-typescript-mern-todo\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import TodoItem from'./components/TodoItem';import{MdSettings}from'react-icons/md';import AddTodo from'./components/AddTodo';import{DragDropContext,Droppable}from'react-beautiful-dnd';import{getMeetingLen,postMeetingLen,addTodo,deleteTodo,getTodos2}from'./API';import BonusItem from\"./components/BonusItem\";import DateComp from'./components/theDate';// @ts-ignore\nimport audio from'./fanfare.mp3';function shuffleArray(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var temp=array[i];array[i]=array[j];array[j]=temp;}}var useKeyPress=function useKeyPress(targetKey){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),keyPressed=_useState2[0],setKeyPressed=_useState2[1];function downHandler(_ref){var key=_ref.key;if(key===targetKey){setKeyPressed(true);}}var upHandler=function upHandler(_ref2){var key=_ref2.key;if(key===targetKey){setKeyPressed(false);}};React.useEffect(function(){window.addEventListener(\"keydown\",downHandler);window.addEventListener(\"keyup\",upHandler);return function(){window.removeEventListener(\"keydown\",downHandler);window.removeEventListener(\"keyup\",upHandler);};});return keyPressed;};var App=function App(){var downPress=useKeyPress(\"ArrowDown\");var upPress=useKeyPress(\"ArrowUp\");var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todos=_useState4[0],setTodos=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),selected=_useState6[0],setSelected=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),before=_useState8[0],setBefore=_useState8[1];var _useState9=useState(-1),_useState10=_slicedToArray(_useState9,2),cursor=_useState10[0],setCursor=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),realTime=_useState12[0],setTime=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),nonZeroTime=_useState14[0],setZero=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),lastIndex=_useState16[0],setLastIndex=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),amountSubtract=_useState18[0],setAmountSubtract=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),meetingLenMenu=_useState20[0],setMeetingLenMenu=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),addTodoMenu=_useState22[0],setAddTodoMenu=_useState22[1];var toggleMeetingLenMenu=function toggleMeetingLenMenu(){setMeetingLenMenu(!meetingLenMenu);};var closeMenu=function closeMenu(){setMeetingLenMenu(false);setAddTodoMenu(false);};var toggleAddTodoMenu=function toggleAddTodoMenu(){setAddTodoMenu(!addTodoMenu);};var timeCallback=function timeCallback(timerTime){if(timerTime!==0&&timerTime!==prevTime){setZero(timerTime);}setTime(timerTime);};var getTodoTime=function getTodoTime(){var todoTime=0;for(var i=0;i<todos.length;i++){todoTime+=todos[i].time+todos[i].overtime-todos[i].extra;}return todoTime;};var getNonCompressedTodoTime=function getNonCompressedTodoTime(){var todoTime=0;for(var i=0;i<todos.length;i++){todoTime+=todos[i].nonCompressedTime;}return todoTime;};function getLongestName(){var longest='';for(var i=0;i<todos.length;i++){if(todos[i].name.length>=longest.length){longest=todos[i].name;}}return longest.length;}var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),longestName=_useState24[0],setLongestName=_useState24[1];var _useState25=useState(0),_useState26=_slicedToArray(_useState25,2),todoTime=_useState26[0],setTodoTime=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),nonCompressedtodoTime=_useState28[0],setNonCompressedTodoTime=_useState28[1];var _useState29=useState(0),_useState30=_slicedToArray(_useState29,2),diff=_useState30[0],setDiff=_useState30[1];var _useState31=useState(cursor+1),_useState32=_slicedToArray(_useState31,2),index=_useState32[0],setIndex=_useState32[1];useEffect(function(){setTodoTime(getTodoTime());setNonCompressedTodoTime(getNonCompressedTodoTime());setLongestName(getLongestName());},[todos]);var _useState33=useState(0),_useState34=_slicedToArray(_useState33,2),meetingLen=_useState34[0],setMeetingLen=_useState34[1];var _useState35=useState(),_useState36=_slicedToArray(_useState35,2),tempMeeting=_useState36[0],setTempMeeting=_useState36[1];var _useState37=useState(0),_useState38=_slicedToArray(_useState37,2),origBonus=_useState38[0],setOrigBonus=_useState38[1];useEffect(function(){if(meetingLen>todoTime){setOrigBonus(meetingLen-nonCompressedtodoTime);setDiff(0);}else{setOrigBonus(0);if(meetingLen<todoTime){setDiff(todoTime-meetingLen);}}},[todoTime,meetingLen,index]);var compressTodos=function compressTodos(){if(todos[index]!==undefined){if(todos[index].time>=2000){todos[index].initTime-=1000;todos[index].time-=1000;setDiff(diff-1000);}setIndex(index+1);if(index===todos.length-1){setIndex(cursor+1);}}setTodoTime(getTodoTime);};useEffect(function(){if(diff>0&&todoTime!==todos.length*1000){compressTodos();}},[index,diff]);var resetTodos=function resetTodos(){for(var i=0;i<todos.length;i++){todos[i].initTime=todos[i].nonCompressedTime;todos[i].time=todos[i].nonCompressedTime;}setTodoTime(getTodoTime());};useEffect(function(){setIndex(0);resetTodos();},[meetingLen]);useEffect(function(){setBonus(origBonus);},[origBonus]);var _useState39=useState(0),_useState40=_slicedToArray(_useState39,2),prevTime=_useState40[0],setPrevTime=_useState40[1];useEffect(function(){// resetTodos()\nfetchMeetingLen();},[]);useEffect(function(){fetchTodos();},[]);var _useState41=useState(0),_useState42=_slicedToArray(_useState41,2),bonusTime=_useState42[0],setBonus=_useState42[1];useEffect(function(){if(selected!==undefined){//if person goes overtime\nif(realTime>Math.round(selected.time-selected.extra)&&!(cursor===todos.length-1&&bonusTime<=0)){//increase selected.overtime so their box increases in size\n//only increase box when there is bonusTime or other people's time left to take from\nif(isTimeLeft()||bonusTime>0){selected.overtime=realTime-Math.round(selected.time-selected.extra);}//decrease other slots if bonusTime == 0\nif(bonusTime<100){if(isTimeLeft()){var reducedSlot2=cursor+lastIndex;todos[reducedSlot2].time-=100;setAmountSubtract(amountSubtract+100);if(amountSubtract===1000){setLastIndex(lastIndex+1);setAmountSubtract(0);}}}else if(bonusTime>=100){//decrease bonusTime\nsetBonus(bonusTime-100);}}}},[realTime]);var getPercent=function getPercent(todo){var percent=todo.time-todo.extra+todo.overtime;percent=percent/(todoTime+bonusTime)*100;if(percent<6.5){return 6.5;}return percent;};var handleDeleteTodo=function handleDeleteTodo(_id,index){deleteTodo(_id).then(function(_ref3){var status=_ref3.status;if(status!==200){throw new Error('Error! Todo not deleted');}else{var extraBonus=todos[index].time;todos.splice(index,1);setBonus(bonusTime+extraBonus);setOrigBonus(origBonus+extraBonus);}}).catch(function(err){return console.log(err);});};var isTimeLeft=function isTimeLeft(){for(var i=cursor+1;i<todos.length;i++){if(todos[i].time>1000){return true;}}return false;};var isSlotDecreased=function isSlotDecreased(){var numDecreased=0;for(var i=cursor+1;i<todos.length;i++){if(todos[i].initTime>todos[i].time){numDecreased+=todos[i].initTime-todos[i].time;}}return numDecreased;};var slotDecreased=isSlotDecreased();useEffect(function(){if(cursor+lastIndex>=todos.length&&isTimeLeft()){setLastIndex(1);}},[lastIndex]);useEffect(function(){if(cursor>=0&&cursor+lastIndex<todos.length&&todos[cursor+lastIndex].time<=1000&&isTimeLeft()){setLastIndex(lastIndex+1);}},[lastIndex]);useEffect(function(){if(downPress){setLastIndex(1);var trumpetSound=new Audio(audio);if(cursor===-1){trumpetSound.play();}if(selected!==undefined){//if person takes less than set time\nif(selected.overtime===0&&nonZeroTime<selected.time){var difference=selected.time-nonZeroTime;slotDecreased=isSlotDecreased();if(slotDecreased>0){var subtract=Math.floor(difference/slotDecreased);//increase subsequent slots that are under time (until they are back to their set times)\nfor(var i=cursor+1;i<todos.length;i++){if(todos[i].time<todos[i].initTime){todos[i].time+=subtract;difference-=subtract;}}for(var _i=cursor+1;_i<todos.length;_i++){while(difference>0&&todos[_i].time<todos[_i].initTime){todos[_i].time+=1;difference-=1;}}}setBonus(bonusTime+difference);selected.extra+=selected.time-nonZeroTime;// selected.time = nonZeroTime;\n}}if(cursor<todos.length){setCursor(function(prevState){return prevState<todos.length?prevState+1:prevState;});}else{setCursor(todos.length+1);}setBefore(todos[cursor]);setSelected(todos[cursor+1]);}},[downPress]);useEffect(function(){if(upPress){setLastIndex(1);setPrevTime(nonZeroTime);if(cursor===0){window.location.reload();}setBefore(todos[cursor-2]);if(before!==undefined){//if slot before took less than designated time\nif(before.extra>0){var difference=before.extra;before.extra=0;if(slotDecreased>0){var subtract=Math.floor(difference/slotDecreased);for(var i=cursor+1;i<todos.length;i++){todos[i].time-=subtract;difference-=subtract;}//increase subsequent slots that are under time (until they are back to their set times)\nfor(var _i2=cursor+1;_i2<todos.length;_i2++){while(difference>0&&todos[_i2].time<todos[_i2].initTime){todos[_i2].time-=1;difference-=1;}}}else{setBonus(bonusTime-difference);}// selected.time = nonZeroTime;\n}}setCursor(function(prevState){return prevState>0?prevState-1:prevState;});setSelected(todos[cursor-1]);}},[upPress]);var onDragEnd=function onDragEnd(_ref4){var source=_ref4.source,destination=_ref4.destination;// Make sure we have a valid destination\nif(destination===undefined||destination===null||destination.index<source.index&&destination.index<=cursor){window.scrollTo(0,0);return null;}// Make sure we're actually moving the item\nif(destination.index===source.index){window.scrollTo(0,0);return null;}// Move the item within the list\n// Start by making a new list without the dragged item\nvar newList=todos.filter(function(_,idx){return idx!==source.index;});// Then insert the item at the right location\nnewList.splice(destination.index,0,todos[source.index]);// Update the list\nsetTodos(newList);window.scrollTo(0,0);};// const fetchTodos = async () => {\n//     const response = await fetch('https://wuzsxfe473.execute-api.us-east-2.amazonaws.com/Dev/@connections')\n//     const body = await response.json();\n//     shuffleTodos(body)\n// }\nvar fetchTodos=function fetchTodos(){getTodos2().then(function(_ref5){var todos=_ref5.data.todos;return shuffleTodos(todos);}).catch(function(err){return console.log(err);});};function shuffleTodos(inputTodos){var namesList=[];var finalList=[];var todoList=[];var otherList=[];var interns=['Daron','Srishti','Matthew','Vikram','Saralin','Damien','Tobias','Karthik','Michael'];var fullTimers=['Jo','Kendra','Qian','Bon','David'];var finalWord=['Fraser','Justin'];shuffleArray(interns);shuffleArray(fullTimers);shuffleArray(finalWord);var orderList=interns.concat(fullTimers,finalWord);inputTodos.forEach(function(element){if(orderList.includes(element.name)){namesList.push(element.name);todoList.push(element);}else{otherList.push(element);}});otherList.forEach(function(element){finalList.push(element);});for(var i=0;i<orderList.length;i++){if(namesList.includes(orderList[i])){var file=todoList[namesList.indexOf(orderList[i])];finalList.push(file);}}setTodos(finalList);}var fetchMeetingLen=function fetchMeetingLen(){getMeetingLen().then(function(_ref6){var meetingLen=_ref6.data.meetingLen;return setMeetingLen(meetingLen*1000);}).catch(function(err){return console.log(err);});};var updateMeetingLen=function updateMeetingLen(meetingLen){postMeetingLen(meetingLen).then(function(response){console.log(response);});setMeetingLen(meetingLen*1000);setTempMeeting(undefined);setMeetingLenMenu(false);};var handleForm=function handleForm(e){if(e.key==='Enter'){if(tempMeeting!=undefined){updateMeetingLen(tempMeeting);}e.preventDefault();}};var handleFormOnSubmit=function handleFormOnSubmit(e){e.preventDefault();if(tempMeeting!=undefined){updateMeetingLen(tempMeeting);}};var handleSaveTodo=function handleSaveTodo(e,formData){e.preventDefault();addTodo(formData).then(function(_ref7){var status=_ref7.status,data=_ref7.data;if(status!==201){throw new Error('Error! Todo not saved');}if(data.todo){todos.push(data.todo);setBonus(bonusTime-data.todo.time);setOrigBonus(origBonus-data.todo.time);}}).catch(function(err){return console.log(err);});};return/*#__PURE__*/React.createElement(\"main\",{className:\"App\",id:\"behindComponent\"},/*#__PURE__*/React.createElement(DragDropContext,{onDragEnd:onDragEnd},/*#__PURE__*/React.createElement(\"form\",{className:\"meetingLen\",onSubmit:handleFormOnSubmit,style:{display:!meetingLenMenu?'none':''}},/*#__PURE__*/React.createElement(\"label\",null,\" Meeting Length:\",/*#__PURE__*/React.createElement(\"input\",{className:\"inputMeetingLen\",onKeyDown:handleForm,onSubmit:handleFormOnSubmit,type:meetingLenMenu?\"number\":\"string\",defaultValue:\"\",onChange:function onChange(e){return setTempMeeting(e.target.value);},value:tempMeeting||\"\",id:\"meetingLen\"}),\" min \"),/*#__PURE__*/React.createElement(\"button\",{className:\"buttonStyle\",disabled:tempMeeting==undefined,type:\"submit\"},\"Submit\"),/*#__PURE__*/React.createElement(\"button\",{className:\"xOutMeetingLen\",onClick:toggleMeetingLenMenu},\"x\")),/*#__PURE__*/React.createElement(\"div\",{className:\"meetingLen\",style:{display:!addTodoMenu?'none':''}},/*#__PURE__*/React.createElement(AddTodo,{saveTodo:handleSaveTodo}),/*#__PURE__*/React.createElement(\"button\",{className:\"xOutMeetingLen\",onClick:toggleAddTodoMenu},\"x\")),/*#__PURE__*/React.createElement(\"div\",{className:\"test\",onClick:closeMenu},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',flexDirection:'row'}},/*#__PURE__*/React.createElement(\"h1\",{style:{fontSize:'30px',flex:'1 1',color:'black'}},\"Research Project Updates Meeting \"),/*#__PURE__*/React.createElement(\"div\",{className:\"headerWrapper\",style:{alignContent:'right',textAlign:'right'}},/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:'20px',fontWeight:'bold'}},\" \",meetingLen/1000,\" min\"),/*#__PURE__*/React.createElement(DateComp,null))),/*#__PURE__*/React.createElement(Droppable,{droppableId:\"col-1\",isDropDisabled:false},function(provided){var style=_objectSpread({// height: (todoTime - ((bonusTime) / (todoTime+bonusTime) * 100))/(todoTime) + '%' ,\ncolor:'black'},provided.droppableProps);return/*#__PURE__*/React.createElement(\"ul\",Object.assign({className:\"characters\"},provided.droppableProps,{ref:provided.innerRef,style:style}),todos.map(function(todo,index){return/*#__PURE__*/React.createElement(TodoItem,{key:todo._id,todo:todo,deleteTodoApp:handleDeleteTodo,index:index,active:index===cursor,done:index<cursor,callbackFromParent2:timeCallback,percent:getPercent(todo),bonusTime:bonusTime,longestName:longestName});}),provided.placeholder,/*#__PURE__*/React.createElement(BonusItem,{origBonus:origBonus,time:bonusTime,active:cursor===todos.length,done:cursor===todos.length+1,percent:bonusTime/(todoTime+bonusTime)*100}));})),/*#__PURE__*/React.createElement(\"div\",{className:\"topButton\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown\"},/*#__PURE__*/React.createElement(MdSettings,{size:26,color:\"rgb(200,200,200)\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-content\"},/*#__PURE__*/React.createElement(\"a\",{onClick:toggleMeetingLenMenu},\"Meeting length\"),/*#__PURE__*/React.createElement(\"a\",{onClick:toggleAddTodoMenu},\"Add Slot\"))))));};export default App;","map":{"version":3,"sources":["C:/Users/Saralin/IdeaProjects/fullstack-typescript-mern-todo/client/src/App.tsx"],"names":["React","useEffect","useState","TodoItem","MdSettings","AddTodo","DragDropContext","Droppable","getMeetingLen","postMeetingLen","addTodo","deleteTodo","getTodos2","BonusItem","DateComp","audio","shuffleArray","array","i","length","j","Math","floor","random","temp","useKeyPress","targetKey","keyPressed","setKeyPressed","downHandler","key","upHandler","window","addEventListener","removeEventListener","App","downPress","upPress","todos","setTodos","selected","setSelected","before","setBefore","cursor","setCursor","realTime","setTime","nonZeroTime","setZero","lastIndex","setLastIndex","amountSubtract","setAmountSubtract","meetingLenMenu","setMeetingLenMenu","addTodoMenu","setAddTodoMenu","toggleMeetingLenMenu","closeMenu","toggleAddTodoMenu","timeCallback","timerTime","prevTime","getTodoTime","todoTime","time","overtime","extra","getNonCompressedTodoTime","nonCompressedTime","getLongestName","longest","name","longestName","setLongestName","setTodoTime","nonCompressedtodoTime","setNonCompressedTodoTime","diff","setDiff","index","setIndex","meetingLen","setMeetingLen","tempMeeting","setTempMeeting","origBonus","setOrigBonus","compressTodos","undefined","initTime","resetTodos","setBonus","setPrevTime","fetchMeetingLen","fetchTodos","bonusTime","round","isTimeLeft","reducedSlot2","getPercent","todo","percent","handleDeleteTodo","_id","then","status","Error","extraBonus","splice","catch","err","console","log","isSlotDecreased","numDecreased","slotDecreased","trumpetSound","Audio","play","difference","subtract","prevState","location","reload","onDragEnd","source","destination","scrollTo","newList","filter","_","idx","data","shuffleTodos","inputTodos","namesList","finalList","todoList","otherList","interns","fullTimers","finalWord","orderList","concat","forEach","element","includes","push","file","indexOf","updateMeetingLen","response","handleForm","e","preventDefault","handleFormOnSubmit","handleSaveTodo","formData","display","target","value","flexDirection","fontSize","flex","color","alignContent","textAlign","fontWeight","provided","style","droppableProps","innerRef","map","placeholder"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport TodoItem from './components/TodoItem'\r\nimport {MdSettings} from 'react-icons/md';\r\nimport AddTodo from './components/AddTodo'\r\nimport {DragDropContext, Droppable, DropResult} from 'react-beautiful-dnd'\r\nimport {getMeetingLen, postMeetingLen, addTodo, deleteTodo, getTodos2} from './API'\r\nimport BonusItem from \"./components/BonusItem\";\r\nimport DateComp from './components/theDate';\r\n\r\n// @ts-ignore\r\nimport audio from './fanfare.mp3';\r\n\r\nfunction shuffleArray(array:any) {\r\n    for (let i = array.length - 1; i > 0; i--) {\r\n        let j = Math.floor(Math.random() * (i + 1));\r\n        let temp = array[i];\r\n        array[i] = array[j];\r\n        array[j] = temp;\r\n    }\r\n}\r\nconst useKeyPress = function (targetKey: string) {\r\n    const [keyPressed, setKeyPressed] = useState(false);\r\n\r\n    function downHandler({key}: { key: string }) {\r\n        if (key === targetKey) {\r\n            setKeyPressed(true);\r\n        }\r\n    }\r\n\r\n    const upHandler = ({key}: { key: string }) => {\r\n        if (key === targetKey) {\r\n            setKeyPressed(false);\r\n        }\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        window.addEventListener(\"keydown\", downHandler);\r\n        window.addEventListener(\"keyup\", upHandler);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"keydown\", downHandler);\r\n            window.removeEventListener(\"keyup\", upHandler);\r\n        };\r\n    },);\r\n    return keyPressed;\r\n};\r\n\r\nconst App: React.FC = () => {\r\n\r\n    const downPress = useKeyPress(\"ArrowDown\");\r\n    const upPress = useKeyPress(\"ArrowUp\");\r\n\r\n    const [todos, setTodos] = useState<ITodo[]>([]);\r\n\r\n    const [selected, setSelected] = useState<ITodo>();\r\n    const [before, setBefore] = useState<ITodo>();\r\n\r\n    const [cursor, setCursor] = useState<number>(-1);\r\n\r\n    const [realTime, setTime] = useState<number>(0);\r\n    const [nonZeroTime, setZero] = useState<number>(0);\r\n\r\n    const [lastIndex, setLastIndex] = useState<number>(0);\r\n    const [amountSubtract, setAmountSubtract] = useState<number>(0);\r\n\r\n    const [meetingLenMenu, setMeetingLenMenu] = useState(false);\r\n    const [addTodoMenu, setAddTodoMenu] = useState(false);\r\n\r\n    const toggleMeetingLenMenu = () => {\r\n        setMeetingLenMenu(!meetingLenMenu);\r\n    }\r\n    const closeMenu = () => {\r\n        setMeetingLenMenu(false);\r\n        setAddTodoMenu(false);\r\n    }\r\n    const toggleAddTodoMenu = () => {\r\n        setAddTodoMenu(!addTodoMenu);\r\n    }\r\n\r\n\r\n    const timeCallback = (timerTime: number) => {\r\n        if (timerTime !== 0 && timerTime !== prevTime) {\r\n            setZero(timerTime)\r\n        }\r\n        setTime(timerTime);\r\n    }\r\n    const getTodoTime = (): number => {\r\n        let todoTime = 0;\r\n        for (let i = 0; i < todos.length; i++) {\r\n            todoTime += todos[i].time + todos[i].overtime - todos[i].extra;\r\n        }\r\n        return todoTime;\r\n    }\r\n    const getNonCompressedTodoTime = (): number => {\r\n        let todoTime = 0;\r\n        for (let i = 0; i < todos.length; i++) {\r\n            todoTime += todos[i].nonCompressedTime;\r\n        }\r\n        return todoTime;\r\n    }\r\n\r\n    function getLongestName() {\r\n        let longest = '';\r\n        for (let i = 0; i < todos.length; i++) {\r\n            if (todos[i].name.length >= longest.length) {\r\n                longest = todos[i].name;\r\n            }\r\n        }\r\n        return longest.length;\r\n    }\r\n\r\n    const [longestName, setLongestName] = useState<number>(0);\r\n    const [todoTime, setTodoTime] = useState<number>(0);\r\n    const [nonCompressedtodoTime, setNonCompressedTodoTime] = useState<number>(0);\r\n    const [diff, setDiff] = useState<number>(0);\r\n    const [index, setIndex] = useState<number>(cursor + 1);\r\n\r\n    useEffect(() => {\r\n        setTodoTime(getTodoTime())\r\n        setNonCompressedTodoTime(getNonCompressedTodoTime())\r\n        setLongestName(getLongestName());\r\n    }, [todos])\r\n    const [meetingLen, setMeetingLen] = useState<number>(0);\r\n    const [tempMeeting, setTempMeeting] = useState<number>();\r\n    const [origBonus, setOrigBonus] = useState<number>(0);\r\n    useEffect(() => {\r\n        if (meetingLen > todoTime) {\r\n            setOrigBonus(meetingLen - nonCompressedtodoTime);\r\n            setDiff(0)\r\n        } else {\r\n            setOrigBonus(0)\r\n            if (meetingLen < todoTime) {\r\n                setDiff(todoTime - meetingLen)\r\n            }\r\n        }\r\n    }, [todoTime, meetingLen, index])\r\n    const compressTodos = (): void => {\r\n        if (todos[index] !== undefined) {\r\n            if (todos[index].time >= 2000) {\r\n                todos[index].initTime -= 1000;\r\n                todos[index].time -= 1000;\r\n                setDiff(diff - 1000)\r\n            }\r\n            setIndex(index + 1);\r\n            if (index === todos.length - 1) {\r\n                setIndex(cursor + 1);\r\n            }\r\n        }\r\n        setTodoTime(getTodoTime);\r\n    }\r\n    useEffect(() => {\r\n        if (diff > 0 && todoTime !== todos.length * 1000) {\r\n            compressTodos();\r\n        }\r\n    }, [index, diff])\r\n\r\n    const resetTodos = (): void => {\r\n        for (let i = 0; i < todos.length; i++) {\r\n            todos[i].initTime = todos[i].nonCompressedTime;\r\n            todos[i].time = todos[i].nonCompressedTime;\r\n        }\r\n        setTodoTime(getTodoTime())\r\n    }\r\n    useEffect(() => {\r\n        setIndex(0)\r\n        resetTodos();\r\n    }, [meetingLen])\r\n    useEffect(() => {\r\n        setBonus(origBonus)\r\n    }, [origBonus])\r\n\r\n    const [prevTime, setPrevTime] = useState<number>(0);\r\n    useEffect(() => {\r\n        // resetTodos()\r\n        fetchMeetingLen()\r\n    }, [])\r\n    useEffect(() => {\r\n        fetchTodos();\r\n    }, [])\r\n\r\n    const [bonusTime, setBonus] = useState<number>(0);\r\n    useEffect(() => {\r\n        if (selected !== undefined) {\r\n            //if person goes overtime\r\n            if (realTime > Math.round(selected.time - selected.extra) && !(cursor === todos.length - 1 && bonusTime <= 0)) {\r\n                //increase selected.overtime so their box increases in size\r\n                //only increase box when there is bonusTime or other people's time left to take from\r\n                if (isTimeLeft() || bonusTime > 0) {\r\n                    selected.overtime = (realTime - Math.round(selected.time - selected.extra));\r\n                }\r\n                //decrease other slots if bonusTime == 0\r\n                if (bonusTime < 100) {\r\n                    if (isTimeLeft()) {\r\n                        let reducedSlot2 = cursor + lastIndex;\r\n                        todos[reducedSlot2].time -= 100;\r\n                        setAmountSubtract(amountSubtract + 100)\r\n                        if (amountSubtract === 1000) {\r\n                            setLastIndex(lastIndex + 1);\r\n                            setAmountSubtract(0)\r\n                        }\r\n                    }\r\n                } else if (bonusTime >= 100) {//decrease bonusTime\r\n                    setBonus(bonusTime - 100)\r\n                }\r\n            }\r\n        }\r\n    }, [realTime])\r\n\r\n\r\n    const getPercent = (todo: ITodo): number => {\r\n        let percent = (todo.time - todo.extra + todo.overtime);\r\n        percent = percent / (todoTime + bonusTime) * 100\r\n        if (percent < 6.5) {\r\n            return (6.5);\r\n        }\r\n        return percent;\r\n    }\r\n    const handleDeleteTodo = (_id: string, index: number): void => {\r\n        deleteTodo(_id)\r\n            .then(({status, }) => {\r\n                if (status !== 200) {\r\n                    throw new Error('Error! Todo not deleted')\r\n                } else {\r\n                    let extraBonus = todos[index].time;\r\n                    todos.splice(index,1);\r\n                    setBonus(bonusTime+extraBonus);\r\n                    setOrigBonus(origBonus+extraBonus)\r\n                }})\r\n            .catch((err) => console.log(err))\r\n    }\r\n    const isTimeLeft = (): boolean => {\r\n        for (let i = cursor + 1; i < todos.length; i++) {\r\n            if (todos[i].time > 1000) {\r\n                return true\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    const isSlotDecreased = (): number => {\r\n        let numDecreased = 0;\r\n        for (let i = cursor + 1; i < todos.length; i++) {\r\n            if (todos[i].initTime > todos[i].time) {\r\n                numDecreased += todos[i].initTime - todos[i].time;\r\n            }\r\n        }\r\n        return numDecreased;\r\n    }\r\n    let slotDecreased = isSlotDecreased();\r\n    useEffect(() => {\r\n        if (cursor + lastIndex >= todos.length && isTimeLeft()) {\r\n            setLastIndex(1);\r\n        }\r\n    }, [lastIndex])\r\n    useEffect(() => {\r\n        if (cursor >= 0 && (cursor + lastIndex) < todos.length && todos[cursor + lastIndex].time <= 1000 && isTimeLeft()) {\r\n            setLastIndex(lastIndex + 1)\r\n        }\r\n    }, [lastIndex])\r\n    useEffect(() => {\r\n        if (downPress) {\r\n            setLastIndex(1);\r\n            let trumpetSound = new Audio(audio);\r\n            if (cursor === -1) {\r\n                trumpetSound.play()\r\n            }\r\n            if (selected !== undefined) {\r\n                //if person takes less than set time\r\n                if (selected.overtime === 0 && nonZeroTime < (selected.time)) {\r\n                    let difference = selected.time - nonZeroTime;\r\n                    slotDecreased = isSlotDecreased()\r\n                    if (slotDecreased > 0) {\r\n                        let subtract = Math.floor(difference / slotDecreased)\r\n                        //increase subsequent slots that are under time (until they are back to their set times)\r\n                        for (let i = cursor + 1; i < todos.length; i++) {\r\n                            if (todos[i].time < todos[i].initTime) {\r\n                                todos[i].time += subtract;\r\n                                difference -= subtract;\r\n                            }\r\n                        }\r\n                        for (let i = cursor + 1; i < todos.length; i++) {\r\n                            while (difference > 0 && todos[i].time < todos[i].initTime) {\r\n                                todos[i].time += 1;\r\n                                difference -= 1;\r\n                            }\r\n                        }\r\n                    }\r\n                    setBonus(bonusTime + difference);\r\n                    selected.extra += selected.time - nonZeroTime\r\n                    // selected.time = nonZeroTime;\r\n                }\r\n            }\r\n\r\n            if (cursor < todos.length) {\r\n                setCursor(prevState =>\r\n                    prevState < todos.length ? prevState + 1 : prevState)\r\n            } else {\r\n                setCursor(todos.length + 1);\r\n            }\r\n            setBefore(todos[cursor])\r\n            setSelected(todos[cursor + 1]);\r\n        }\r\n    }, [downPress]);\r\n\r\n    useEffect(() => {\r\n        if (upPress) {\r\n            setLastIndex(1)\r\n            setPrevTime(nonZeroTime);\r\n            if (cursor === 0) {\r\n                window.location.reload();\r\n            }\r\n            setBefore(todos[cursor - 2])\r\n            if (before !== undefined) {\r\n                //if slot before took less than designated time\r\n                if (before.extra > 0) {\r\n                    let difference = before.extra;\r\n                    before.extra = 0;\r\n                    if (slotDecreased > 0) {\r\n                        let subtract = Math.floor(difference / slotDecreased)\r\n                        for (let i = cursor + 1; i < todos.length; i++) {\r\n                            todos[i].time -= subtract;\r\n                            difference -= subtract;\r\n                        }\r\n                        //increase subsequent slots that are under time (until they are back to their set times)\r\n                        for (let i = cursor + 1; i < todos.length; i++) {\r\n                            while (difference > 0 && todos[i].time < todos[i].initTime) {\r\n                                todos[i].time -= 1;\r\n                                difference -= 1;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        setBonus(bonusTime - difference);\r\n                    }\r\n                    // selected.time = nonZeroTime;\r\n                }\r\n            }\r\n            setCursor(prevState => (prevState > 0 ? prevState - 1 : prevState));\r\n            setSelected(todos[cursor - 1]);\r\n        }\r\n    }, [upPress]);\r\n\r\n\r\n    const onDragEnd = ({source, destination}: DropResult) => {\r\n        // Make sure we have a valid destination\r\n        if (destination === undefined || destination === null ||\r\n            (destination.index < source.index && destination.index <= cursor)) {\r\n            window.scrollTo(0, 0);\r\n            return null;\r\n        }\r\n        // Make sure we're actually moving the item\r\n        if (destination.index === source.index) {\r\n            window.scrollTo(0, 0);\r\n            return null;\r\n        }\r\n        // Move the item within the list\r\n        // Start by making a new list without the dragged item\r\n        const newList = todos.filter((_: any, idx: number) => idx !== source.index)\r\n        // Then insert the item at the right location\r\n        newList.splice(destination.index, 0, todos[source.index])\r\n        // Update the list\r\n        setTodos(newList)\r\n        window.scrollTo(0, 0)\r\n    }\r\n    // const fetchTodos = async () => {\r\n    //     const response = await fetch('https://wuzsxfe473.execute-api.us-east-2.amazonaws.com/Dev/@connections')\r\n    //     const body = await response.json();\r\n    //     shuffleTodos(body)\r\n    // }\r\n    const fetchTodos = (): void => {\r\n        getTodos2()\r\n            .then(({data: {todos}}: ITodo[] | any) =>\r\n                shuffleTodos(todos))\r\n            .catch((err: Error) => console.log(err));\r\n    }\r\n    function shuffleTodos(inputTodos: ITodo[]){\r\n        let namesList: string[] = [];\r\n        let finalList: ITodo[] = [];\r\n        let todoList: ITodo[] = [];\r\n        let otherList: ITodo[] = [];\r\n        let interns = ['Daron','Srishti','Matthew','Vikram','Saralin', 'Damien','Tobias','Karthik','Michael']\r\n        let fullTimers = ['Jo','Kendra', 'Qian', 'Bon', 'David']\r\n        let finalWord = ['Fraser', 'Justin']\r\n        shuffleArray(interns); shuffleArray(fullTimers); shuffleArray(finalWord)\r\n        let orderList = interns.concat(fullTimers, finalWord);\r\n\r\n        inputTodos.forEach(element => {\r\n            if (orderList.includes(element.name)) {\r\n                namesList.push(element.name);\r\n                todoList.push(element)\r\n            } else {\r\n                otherList.push(element)\r\n            }\r\n        });\r\n        otherList.forEach(element => {\r\n            finalList.push(element);\r\n        });\r\n        for(let i=0;i<orderList.length;i++){\r\n            if(namesList.includes(orderList[i])){\r\n                let file = todoList[namesList.indexOf(orderList[i])]\r\n                finalList.push(file);\r\n            }}\r\n        setTodos(finalList);\r\n    }\r\n    const fetchMeetingLen = (): void => {\r\n        getMeetingLen()\r\n            .then(({data: {meetingLen}}: number | any) => setMeetingLen(meetingLen * 1000))\r\n            .catch((err: Error) => console.log(err));\r\n    }\r\n\r\n    const updateMeetingLen = (meetingLen: number): void => {\r\n        postMeetingLen(meetingLen).then(response => {\r\n            console.log(response)\r\n        });\r\n        setMeetingLen(meetingLen * 1000)\r\n        setTempMeeting(undefined);\r\n        setMeetingLenMenu(false)\r\n    }\r\n\r\n\r\n    const handleForm = (e: any) => {\r\n        if (e.key === 'Enter') {\r\n            if (tempMeeting != undefined) {\r\n                updateMeetingLen(tempMeeting);\r\n            }\r\n            e.preventDefault();\r\n        }\r\n    }\r\n    const handleFormOnSubmit = (e: any) => {\r\n        e.preventDefault();\r\n        if (tempMeeting != undefined) {\r\n            updateMeetingLen(tempMeeting);\r\n        }\r\n    }\r\n    const handleSaveTodo = (e: React.FormEvent, formData: ITodo): void => {\r\n        e.preventDefault()\r\n        addTodo(formData)\r\n            .then(({status, data}) => {\r\n                if (status !== 201) {\r\n                    throw new Error('Error! Todo not saved')\r\n                }\r\n                if (data.todo) {\r\n                    todos.push(data.todo)\r\n                    setBonus(bonusTime - data.todo.time)\r\n                    setOrigBonus(origBonus-data.todo.time)\r\n                }\r\n            })\r\n            .catch((err) => console.log(err))\r\n    }\r\n\r\n    return (\r\n        <main className='App' id=\"behindComponent\">\r\n            <DragDropContext onDragEnd={onDragEnd}>\r\n                <form className=\"meetingLen\" onSubmit={handleFormOnSubmit}\r\n                      style={{display: !meetingLenMenu ? 'none' : ''}}>\r\n                    <label> Meeting Length:\r\n                        <input className=\"inputMeetingLen\" onKeyDown={handleForm} onSubmit={handleFormOnSubmit}\r\n                               type={meetingLenMenu ? \"number\" : \"string\"} defaultValue=\"\"\r\n                               onChange={(e: any) => setTempMeeting(e.target.value)} value={tempMeeting || \"\"}\r\n                               id='meetingLen'/> min </label>\r\n                    <button className=\"buttonStyle\" disabled={tempMeeting == undefined} type='submit'>Submit</button>\r\n                    <button className=\"xOutMeetingLen\" onClick={toggleMeetingLenMenu}>x</button>\r\n                </form>\r\n                <div className=\"meetingLen\" style={{display: !addTodoMenu ? 'none' : ''}}>\r\n                    <AddTodo saveTodo={handleSaveTodo}/>\r\n                    <button className=\"xOutMeetingLen\" onClick={toggleAddTodoMenu}>x</button>\r\n                </div>\r\n                <div className='test' onClick={closeMenu}>\r\n                    <div style={{display: 'flex', flexDirection: 'row'}}>\r\n                        <h1 style={{fontSize: '30px', flex: '1 1', color: 'black'}}>Research Project Updates\r\n                            Meeting </h1>\r\n                        <div className=\"headerWrapper\" style={{alignContent: 'right', textAlign: 'right'}}>\r\n                            <div style={{fontSize: '20px', fontWeight: 'bold'}}> {meetingLen / 1000} min</div>\r\n                            <DateComp/>\r\n                        </div>\r\n                    </div>\r\n                    <Droppable droppableId='col-1' isDropDisabled={false}>\r\n                        {provided => {\r\n                            const style = {\r\n                                // height: (todoTime - ((bonusTime) / (todoTime+bonusTime) * 100))/(todoTime) + '%' ,\r\n                                color: 'black',\r\n                                ...provided.droppableProps,\r\n                            };\r\n                            return (\r\n                                <ul className=\"characters\"\r\n                                    {...provided.droppableProps} ref={provided.innerRef} style={style}>\r\n                                    {todos.map((todo: ITodo, index) => (\r\n                                        <TodoItem\r\n                                            key={todo._id}\r\n                                            todo={todo}\r\n                                            deleteTodoApp={handleDeleteTodo}\r\n                                            index={index}\r\n                                            active={index === cursor}\r\n                                            done={index < cursor}\r\n                                            callbackFromParent2={timeCallback}\r\n                                            percent={getPercent(todo)}\r\n                                            bonusTime={bonusTime}\r\n                                            longestName={longestName}\r\n                                        />\r\n                                    ))}\r\n                                    {provided.placeholder}\r\n                                    <BonusItem\r\n                                        origBonus={origBonus} time={bonusTime} active={cursor === todos.length}\r\n                                        done={cursor === todos.length + 1}\r\n                                        percent={(bonusTime) / (todoTime + bonusTime) * 100}/>\r\n                                </ul>)\r\n                        }}\r\n\r\n                    </Droppable>\r\n                </div>\r\n                <div className=\"topButton\">\r\n                    <div className=\"dropdown\"><MdSettings size={26} color='rgb(200,200,200)'/>\r\n                        <div className=\"dropdown-content\">\r\n                            <a onClick={toggleMeetingLenMenu}>Meeting length</a>\r\n                            <a onClick={toggleAddTodoMenu}>Add Slot</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </DragDropContext>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default App\r\n"]},"metadata":{},"sourceType":"module"}